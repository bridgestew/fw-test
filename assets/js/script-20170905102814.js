$(function(){$.extend({getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++)
{hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;},getUrlVar:function(name){return $.getUrlVars()[name];}});$('#masthead').on('click','#nav-trigger',function(){$('.nav-main').toggleClass('is-shown');$('.nav-secondary').toggleClass('is-shown');$('.nav-secondary-wrapper').toggleClass('is-shown--flex');$('.nav-utility').toggleClass('is-displayed');return false;});$('.js-accordion-item.is-collapsed').find('.js-accordion-body').hide();$('.js-accordion').on('click','.js-accordion-heading',function(event){if($(this).parents('.js-accordion-item').hasClass('is-collapsed')){$(this).parents('.js-accordion-item').removeClass('is-collapsed');$(this).parents('.js-accordion-item').find('.js-accordion-body').slideDown(500);}else{$(this).parents('.js-accordion-item').addClass('is-collapsed');$(this).parents('.js-accordion-item').find('.js-accordion-body').slideUp(500);}
return false;});$(document).on('click','.popout',function(e){var videoTitle=$('#main').find('h1').text(),videoFile=$(this).attr('href');var instance=lity('<video class="video-js vjs-default-skin vjs-big-play-centered video-js-modal" controls preload="metadata" width="auto" height="auto" data-setup="{}" poster="" id="js-video"><source src="'+videoFile+'" type="video/mp4"></video>');setTimeout(function(){videojs('js-video').on('loadedmetadata',function(){var url=this.currentSrc(),omniUrl=url.substring(7,url.length-4),omniUrl=omniUrl.match(/\/(.*)/)[1],omniUrl=omniUrl.replace(/\//g,':'),omniUrl=omniUrl.split('?')[0],duration=this.duration();this.on('firstplay',function(){s.Media.open(omniUrl,duration,url);s.Media.play(omniUrl,0);});this.on('pause',function(){s.Media.stop(omniUrl,parseInt(this.currentTime()));});this.on('play',function(){s.Media.play(omniUrl,parseInt(this.currentTime()));});this.on('seeked',function(){s.Media.play(omniUrl,parseInt(this.currentTime()));});this.on('ended',function(){s.Media.stop(omniUrl,parseInt(this.currentTime()));s.Media.close(omniUrl);});this.play();});},0);$(document).on('lity:remove',function(event,instance){window.location.reload();});e.preventDefault();});$('.pagination .media-center-pagination-input').on('keydown',function(e){var $self=$(this);if(e.which!=13){return true;}
var val=parseInt(this.value.trim(),10);var currentPageNum=$self.data('page-num');var filterBy=$self.data('filter-by');if(isNaN(val)||val<1||val>$self.data('pages-count')){val=currentPageNum;}
window.location.replace(window.location.href.split('?')[0]+'?filterBy='+filterBy+'&pageNum='+val);});$('.field .media-center-filter-by').on('change',function(e){window.location.assign(window.location.href.split('?')[0]+'?filterBy='+this.value);});$('.filters-toggle').on('click','a',function(event){var togglegroup=$(this).attr('href');if($(this).parent().hasClass('active')){$(this).parent().removeClass('active');$(togglegroup).hide();}else{$(this).parent().addClass('active');$(togglegroup).show();}
event.preventDefault();});$('.filters-group').on('click','> li > a',function(event){var filterGroup=$(this).attr('href');var facetName=$(this).parents('.facets').attr('id');$('.filters--wrapper').removeClass('hidden');if($(this).parent().hasClass('active')){$(this).parent().removeClass('active');$(filterGroup).removeClass('active');document.cookie=facetName+'_selectedFilter="";path=/';}else{$(this).parent().addClass('active');$(this).parent().siblings().removeClass('active');$(filterGroup).addClass('active');document.cookie=facetName+'_selectedFilter='+filterGroup+';path=/';}
event.preventDefault();});$('.filters').on('click','a',function(){if(!$(this).parent().hasClass('active')){$(this).parent().addClass('active');$(this).addClass('active');}});if(matchMedia){var mq=window.matchMedia('(min-width: 600px)');mq.addListener(WidthChange);WidthChange(mq);}
function WidthChange(mq){if(mq.matches){$('.pod--video').each(function(){var ytVideoId=$(this).data('youtube');if(ytVideoId){$(this).YTPlayer({fitToBackground:true,videoId:ytVideoId});}});$('.filters-group').on('click','> li > a',function(){var filterGroup=$(this).attr('href');$('.filters').removeClass('active');if($(this).parent().hasClass('active')){$(filterGroup).addClass('active');}else{$(filterGroup).removeClass('active');}});var facetName=$('.facets').attr('id');var selectedFilter=getCookie(facetName+'_selectedFilter');if(selectedFilter!==''){var filterGroup=$('a[href="'+selectedFilter+'"]');if(filterGroup.length>0){$('.filters--wrapper').removeClass('hidden');$('.filters').removeClass('active');if($(filterGroup[0]).parent().hasClass('active')){$(filterGroup[0]).parent().removeClass('active');$(selectedFilter).addClass('active');}else{$(filterGroup[0]).parent().addClass('active');$(filterGroup[0]).parent().siblings().removeClass('active');$(selectedFilter).addClass('active');}}}else{if($('.filters-group li').not('active')){$('.filters-group li:first-of-type').addClass('active');$('.filters--wrapper').removeClass('hidden');$('.filters:first-of-type').addClass('active');}}
$('.js-product-images--mobile .js-product-images').insertAfter('.js-pdp-content');}
else{$('.filters-group').on('click','> li > a',function(){var filterGroup=$(this).attr('href');$('.filters').removeClass('active');if($(this).parent().hasClass('active')){$(filterGroup).insertAfter(this);$(filterGroup).addClass('active');}else{}});$('.js-product-images').appendTo('.js-product-images--mobile');}}
if($('.featured-images').rotateFeatures!==undefined){$('.featured-images').rotateFeatures({pagerContainer:'.product-thumbs',interval:0});}
$('.product-thumbs a').on('click',function(e){e.preventDefault();$('.video-js').each(function(videoIndex){var videoId=$(this).attr('id');if(videoId!=null){videojs(videoId).ready(function(){$('.video-js').each(function(index){this.player.pause();});});}});if($('.featured-image iframe')[0]!==undefined){$('.featured-image iframe')[0].contentWindow.postMessage(JSON.stringify({'event':'command','func':'pauseVideo','args':''}),'*');}});$('.full-hover-animation').on({mouseenter:function(e){$(this).find('.hover-replace').attr({src:$(this).find('.hover-replace').attr('data-hover-src'),'data-hover-src':$(this).find('.hover-replace').attr('src')});},mouseleave:function(e){$(this).find('.hover-replace').attr({src:$(this).find('.hover-replace').attr('data-hover-src'),'data-hover-src':$(this).find('.hover-replace').attr('src')});}});function checkVisible(elm,eval){eval=eval||'above';var vpH=$(window).height(),st=$(window).scrollTop(),y=$(elm).offset().top,elementHeight=$(elm).height();if(eval=='visible')return((y<(vpH+st))&&(y>(st-elementHeight)));if(eval=='above')return((y<(vpH+st-elementHeight)));}
setTimeout(function(){if($('.js-product-detail .color-swatches li').hasClass('swatch--selected')){$('.js-product-detail .color-swatches li.swatch--selected').trigger('click');}else{$('.js-product-detail .color-swatches li:first-of-type').trigger('click');}},100);$('.js-product-detail .color-swatches').on('click','.swatch__container',function(e){e.preventDefault();$('input.swatch__picker').remove();$(this).addClass('swatch--selected');$(this).siblings().removeClass('swatch--selected');var color=$(this).data('color');var imageLink=$(this).data('image');var defaultImageLink=$(this).data('default-image');var sku=$(this).data('sku');var price=$(this).data('price');var salePrice=$(this).data('sale-price');var quantity=$(this).data('max-quantity');var cartQuantity=$(this).data('cart-max-quantity');var selectedQuantity=parseInt($('#pdp-quantity-select :selected').val());var warranty=$('#pdp-warranty-select :selected').val();var errorList=$('.parsley-error-list');var formLabels=$('.field label');errorList.hide();formLabels.show();$('.js-product-detail').submit(function(){$(this).parsley($parsleySettings);if(errorList.length){errorList.show();formLabels.hide();}});$('.swatch__label').html(color);$('.field-out-of-stock').hide();if(!$('input[name="/vitamix/commerce/cart/CartFormHandler.skuId"]').length){$('<input name="/vitamix/commerce/cart/CartFormHandler.skuId" id="swatch" value="'+sku+'" type="hidden">').insertBefore('button.add-to-cart');}else{$('input[name="/vitamix/commerce/cart/CartFormHandler.skuId"]').val(sku);}
if(imageLink===''){$('.featured-image:first-of-type img').hide();$('.featured-image:first-of-type img').attr('src',defaultImageLink).fadeIn();$('.featured-image:first-of-type a').attr('href',defaultImageLink);}else{$('.featured-image:first-of-type img').hide();$('.featured-image:first-of-type img').attr('src',imageLink).fadeIn();$('.featured-image:first-of-type a').attr('href',imageLink);}
$('.product-thumbs li:first-of-type a').trigger('click');$('select[name="quantity"] option').remove();for(i=1;i<(cartQuantity+1);i+=1){var selected=selectedQuantity===i?'selected':'';$('select[name="quantity"]').append('<option value="'+i+'" '+selected+'>'+i+'</option>');}
if(salePrice!=price&&salePrice!==''){$('.js-price').html(salePrice);var originally=$('.originally').html();$('.original-price').html(originally+' '+price);$('.sale-callout').show().css({'display':'inline-block'});}else{$('.js-price').html(price);$('.original-price').html('');$('.sale-callout').hide();}
if(typeof warranty!=='undefined'&&warranty.length>0){var warrantyPrice=$(this).data(warranty+'-price');$('.js-price').html(warrantyPrice);}
if(typeof quantity!=='undefined'&&(quantity.length<1||quantity===0)){$('.field-warranty, .field-quantity, button.add-to-cart').hide();$('.field-out-of-stock').show();}else{$('.field-warranty, .field-quantity, button.add-to-cart').show();if(typeof cartQuantity!=='undefined'&&(cartQuantity.length<1||cartQuantity===0)){$('.field-warranty, .field-quantity, button.add-to-cart').hide();$('.field-cart-out-of-stock').show();}}});$('.js-product-detail #pdp-warranty-select').on('change',function(e){$('.swatch__container.swatch--selected').click();});setTimeout(function(){if($('.product .color-swatches li').hasClass('swatch--selected')){$('.product .color-swatches li.swatch--selected').trigger('click');}else{$('.product .color-swatches li:first-of-type').trigger('click');}},100);$('.product .color-swatches').on('click','.swatch__container',function(e){var imageLink=$(this).data('image');var defaultImageLink=$(this).data('default-image');var sku=$(this).data('sku');var productLink=$(this).data('url');$(this).addClass('swatch--selected');$(this).siblings().removeClass('swatch--selected');if(imageLink===''){$(this).parents('.product').find('.product__image img').hide();$(this).parents('.product').find('.product__image img').attr('src',defaultImageLink).fadeIn();}else{$(this).parents('.product').find('.product__image img').hide();$(this).parents('.product').find('.product__image img').attr('src',imageLink).fadeIn();}
var buildUrl=function(base,key,value){var sep=(base.indexOf('?')>-1)?'&':'?';return base+sep+key+'='+value;};var newUrl=buildUrl(productLink,'skuId',sku);$(this).parents('.product').find('.js-product-link').attr('href',newUrl);});setTimeout(function(){$('.js-cart-edit .color-swatches li.swatch--selected').trigger('click');},100);$('.js-cart-edit .color-swatches').on('click','.swatch__container',function(e){var color=$(this).data('color');$('input.swatch__picker').hide();$(this).addClass('swatch--selected');$(this).siblings().removeClass('swatch--selected');$(this).find('input:radio').prop('checked',true);$('.swatch__label').html(color);var quantity=$(this).data('max-quantity');if(quantity.length<1||quantity===0){$('.cart__item__actions .js-btn-update').hide();$('.cart__item__count input').attr('disabled','disabled');$('.field-out-of-stock').show();}else{$(this).parents('.js-cart-edit').find('.cart__item__actions button[type=submit]').show();$('.cart__item__count input').prop('disabled',false);$('.field-out-of-stock').hide();}});var skuId=$.getUrlVar('skuId');if(skuId){setTimeout(function(){var currentSku=$('.js-product-detail .color-swatches').find('li[data-sku='+skuId+']');$(currentSku).click();},100);}
$('.js-blender-compatibility').click(function(event){event.preventDefault();var compatibilityBox=$(this).parents('.cart__item').next('.alert--cart-compatibility');compatibilityBox.slideToggle(100).toggleClass('active');var compatibilityActiveText=$(this).data('toggle-active'),compatibilityDefaultText=$(this).data('toggle-default');if(compatibilityBox.hasClass('active')){$(this).text(compatibilityActiveText);compatibilityBox.css('display','block');}else{$(this).text(compatibilityDefaultText);compatibilityBox.css('display','hidden');}});$('.js-pin').on({mouseenter:function(e){var pin=$(this).data('pin');$('.js-pin[data-pin='+pin+']').addClass('active');},mouseleave:function(e){var pin=$(this).data('pin');$('.js-pin[data-pin='+pin+']').removeClass('active');}});setTimeout(function(){$('.js-toggle-containers a:first').click();},0);$('.js-toggle-containers').on('click','a',function(e){e.preventDefault();$('.js-toggle-containers a').removeClass('active');$(this).addClass('active');$('.js-toggle-containers a').each(function(){var baseImage=$(this).data('image');$(this).find('img').attr('src',baseImage);});var activeImage=$(this).data('active-image');$(this).find('img').attr('src',activeImage);$('.js-toggle-container').addClass('hidden');var container=$(this).data('toggle');$('.'+container).removeClass('hidden');return false;});$('.gif-trigger').on('click',function(e){var imgID=$(this).prop('hash');var imgSrc=$(imgID).attr('src');$(imgSrc).replace('.jpg','.gif');e.preventDefault();});$('.js-social-popup').click(function(event){var width=575,height=400,left=($(window).width()-width)/2,top=($(window).height()-height)/2,url=this.href,opts='status=1'+',width='+width+',height='+height+',top='+top+',left='+left;window.open(url,'social',opts);event.preventDefault();});$('body').on('click','.js-print',function(event){event.preventDefault();window.print();});$('#shipping_state').change(function(event){var newState=$('#shipping_state option:selected').val();$.getJSON('/checkout/shippingMethods.json.jsp',{newState:newState}).done(function(data){var newMethodsCount=data.shippingMethods.length;var existingMethods=$('#shipping_method :radio');var existingMethodsCount=existingMethods.length;if(newMethodsCount<existingMethodsCount){for(i=newMethodsCount;i<=existingMethodsCount;i++){$(existingMethods[i]).parent().remove();}}else if(newMethodsCount>existingMethodsCount){for(i=0;i<(newMethodsCount-existingMethodsCount);i++){$(existingMethods[0]).parent().clone().appendTo($(existingMethods[0]).parent().parent());}}
existingMethods=$('#shipping_method :radio');existingMethods.prop('checked',false);existingMethods.first().click();$.each(data.shippingMethods,function(index,shippingMethod){$(existingMethods[index]).attr('value',shippingMethod.code);$(existingMethods[index]).siblings('label').first().html(shippingMethod.displayName+'\n'+'<span class="punch">'+shippingMethod.price+'</span>');});});});$('#payment_method_credit_card').change(function(){if(this.checked){$('#creditCardForm').removeClass('hidden');if($('#payPalForm').length){$('#payPalForm').addClass('hidden');}
if($('#payPalCreditForm').length){$('#payPalCreditForm').addClass('hidden');}}});$('#payment_method_paypal').change(function(){if(this.checked){$('#creditCardForm').addClass('hidden');if($('#payPalForm').length){$('#payPalForm').removeClass('hidden');}
if($('#payPalCreditForm').length){$('#payPalCreditForm').addClass('hidden');}}});$('#payment_method_paypal_credit').change(function(){if(this.checked){$('#creditCardForm').addClass('hidden');if($('#payPalForm').length){$('#payPalForm').addClass('hidden');}
if($('#payPalCreditForm').length){$('#payPalCreditForm').removeClass('hidden');}}});$('#review-shipping-method-form').find(':radio').each(function(){$(this).change(function(){$('#review-shipping-method-form').submit();});});var billingform=$('#billing-form');billingform.find('.hidden input, .hidden select, .hidden textarea').attr('disabled','');$('input.billing-address').change(function(){if(this.value=='false'){$('.shipping-address').slideDown();$('.shipping-address').removeClass('hidden');billingform.find('.field label').show();billingform.find('.shipping-address input, .shipping-address select, .shipping-address textarea').prop('disabled',false);billingform.parsley().destroy();billingform.parsley($parsleySettings);}else{$('.shipping-address').slideUp();$('.shipping-address').addClass('hidden');billingform.find('.hidden input, .hidden select, .hidden textarea').attr('disabled','');}});$('#payment_use_shipping_false').on('click',function(){$('#billing_firstName').val('');$('#billing_lastName').val('');$('#billing_address1').val('');$('#billing_address2').val('');$('#billing_city').val('');$('#billing_state').val('');$('#billing_postalCode').val('');$('#billing_country').val('');});$('#viewOrderDetails').click(function(event){event.preventDefault();$('#cartSummary').toggleClass('hidden');$('#shippingInfo').toggleClass('hidden');$('#billingInfo').toggleClass('hidden');$('#contactInfo').toggleClass('hidden');$(this).toggleClass('active');if($(this).hasClass('active')){$(this).text($(this).data('btn-hide'));}else{$(this).text($(this).data('btn-show'));}});if($('input, textarea').placehold){$('input, textarea').placehold('placeholder');}
$('select#contactReason').on('change',function(){var optionSelected=$(this).find('option:selected');var valueSelected=optionSelected.data('option-category');var form=$('#contactusform');form.find('.field.hidden').hide();form.find('.field label').show();form.find('.form-actions').show();form.find('.field.hidden input, .field.hidden select, .field.hidden textarea').attr('disabled','');form.parsley().destroy();var orderstatus=['ORDER_STATUS','ORDER_STATUS_BUSINESS'];var warrantyhelp=['SERIAL_NUMBER_TYPE_WARRANTY','SERIAL_NUMBER_TYPE_PROBLEM','SERIAL_NUMBER_TYPE_TRADE_IN'];var generalinquiry=['GENERAL_ENQUIRY'];var donation=['DONATION_REQUEST'];if(jQuery.inArray(valueSelected,orderstatus)>-1){form.find('.js-orderstatus').show();form.find('.js-orderstatus :disabled').prop('disabled',false);}else if(jQuery.inArray(valueSelected,warrantyhelp)>-1){form.find('.js-warrantyhelp').show();form.find('.js-warrantyhelp :disabled').prop('disabled',false);}else if(jQuery.inArray(valueSelected,generalinquiry)>-1){form.find('.js-generalinquiry').show();form.find('.js-generalinquiry :disabled').prop('disabled',false);}else if(jQuery.inArray(valueSelected,donation)>-1){form.find('.js-donation').show();form.find('.form-actions').hide();}else{form.find('.js-generalinquiry').show();form.find('.js-generalinquiry :disabled').prop('disabled',false);}
form.parsley($parsleySettings);});$('select#blogCategory').on('change',function(){var valueSelected=$(this).find('option:selected').val();var form=$('#socialcontactform');form.find('.field.hidden').hide();form.find('.field.hidden input, .field.hidden select, .field.hidden textarea').attr('disabled','');if(valueSelected.toLowerCase()==='other'){$('div.js-blogcatother').show();$('div.js-blogcatother :disabled').prop('disabled',false);}});$('input#newsletterSubscribe').on('change',function(){var checked=$(this).is(':checked');if(checked){$('#newsletterType').show();$('#newsletterType :checkbox').prop('disabled',false);}else{$('#newsletterType').hide();$('#newsletterType :checkbox').attr('disabled',true);}});$('input[name=newsLetter]').on('change',function(){var checked=$(this).val();if(checked=='yes'){$('#newsletterType').show();$('#newsletterType :checkbox').prop('disabled',false);}else{$('#newsletterType').hide();$('#newsletterType :checkbox').attr('disabled',true);}});$parsleySettings={excluded:'input[type=hidden], :disabled',animate:false,listeners:{onFieldValidate:function(fieldInstance,isRadioOrCheckbox){if((fieldInstance[0].type!=='checkbox')&&(fieldInstance[0].type!=='radio')){if((fieldInstance.val()==='')&&(fieldInstance.not('[required]'))){fieldInstance.parents('.field').find('label').show();}}},onFieldError:function(fieldInstance,isRadioOrCheckbox){if((fieldInstance[0].type!=='checkbox')&&(fieldInstance[0].type!=='radio')){fieldInstance.parents('.field').find('label').hide();}else{fieldInstance.parents('.field').find('> label').hide();}
fieldInstance.parents('.field').find('.be-error').hide();$('.js-be-error').hide();},onFieldSuccess:function(fieldInstance,isRadioOrCheckbox){if((fieldInstance[0].type!=='checkbox')&&(fieldInstance[0].type!=='radio')){fieldInstance.parents('.field').find('label').show();}else{fieldInstance.parents('.field').find('> label').show();}
fieldInstance.parents('.field').find('.be-error').hide();$('.js-be-error').hide();},onFormValidate:function(isFormValid,event,ParsleyForm){sessionStorageAPI.removeItem('save-form');}},errors:{container:function(fieldInstance){var $container=$('<div class="js-error"></div>').insertBefore(fieldInstance);return $container;}}};if(jQuery().parsley){$('.js-validate').each(function(){$(this).parsley($parsleySettings);});$('.js-validate [type=submit]').attr('formnovalidate','');$('.js-validate input[type=file]').change(function(){$(this).parsley('validate');});}
$parsleySettingsNoLabels={excluded:'input[type=hidden], input[type=file], :disabled',animate:false,errors:{container:function(fieldInstance){var $container=$('<div class="js-error"></div>').insertBefore(fieldInstance.closest('.field'));return $container;}}};if(jQuery().parsley){$('.js-validate-no-labels').each(function(){$(this).parsley($parsleySettingsNoLabels);});$('.js-validate-no-labels [type=submit]').attr('formnovalidate','');}
$parsleySettingsNoShow={excluded:'input[type=hidden], input[type=file], :disabled',animate:false,errors:{container:function(fieldInstance){return false;}}};if(jQuery().parsley){$('.js-validate-no-show').each(function(){$(this).parsley($parsleySettingsNoShow);});$('.js-validate-no-show [type=submit]').attr('formnovalidate','');}
var sessionStorageAPI={setItem:function(key,value){return sessionStorage.setItem(key,value);},getItem:function(key){return sessionStorage.getItem(key);},setObject:function(key,object){return sessionStorage.setItem(key,JSON.stringify(object));},getObject:function(key){return JSON.parse(sessionStorage.getItem(key));},removeItem:function(key){return sessionStorage.removeItem(key);},clearAll:function(){return sessionStorage.clear();}};var key='save-form';$('.js-field-save').on('blur',function(){var formObj={};$('form .js-field-save').serializeArray().map(function(x){formObj[x.name]=x.value;});sessionStorageAPI.setObject(key,formObj);});var fData=sessionStorageAPI.getObject(key);if(fData){$.each(fData,function(formEle,formEleVal){$('[name="'+formEle+'"]').val(formEleVal);});}
if($('.main').find('form.js-session-expires').length>0){setTimeout(function(){$('#js-session-expired').on('click','a',function(event){event.preventDefault();window.location.reload();});var instance=lity('#js-session-expired');$(document).on('lity:close',function(event,instance){window.location.reload();});},1800000);}
$('.js-phone-numeric').keyup(function(){var numbers=$(this).val();$(this).val(numbers.replace(/\D/,''));});$('.js-disable-multiple-submit').submit(function(){if($(this).parsley('isValid')){$(this).find('.js-btn--submit').hide();$(this).find('.js-btn--processing').show();}});$('.table--recommender').on('click','.arrow',function(){var next=$(this).parents('tr').next('.table--recommender-ranking-row');var prev=$(this).parents('tr').prev('.table--recommender-ranking-row');if($(this).hasClass('down')&&next.length){$(this).parents('tr').hide().insertAfter(next).fadeIn(300);}else if($(this).hasClass('up')&&prev.length){$(this).parents('tr').hide().insertBefore(prev).fadeIn(300);}
$('.table--recommender-ranking-row').each(function(i){$(this).find('.js-count').text(i+1);$(this).find('input').val(i+1);});event.preventDefault();});var filter=$.getUrlVar('filterBy');if(filter){$('.js-list-toggle a[data-toggle-id='+filter+']').addClass('active');}
var clearParam=$.getUrlVar('clr');if(clearParam){$('#shipping_address1').val('');$('#shipping_address2').val('');$('#shipping_city').val('');$('#shipping_state').val('');$('#shipping_postalCode').val('');$('#shipping_country').val('');}
if(typeof google!=='undefined'){var geocoder=new google.maps.Geocoder();$('#estimated-tax-postal-code').on('change focusout',function(){var $this=$(this);if($this.val().length>4){geocoder.geocode({'address':$this.val()},function(result,status){$(result[0]['address_components']).each(function(i,e){$(e.types).each(function(i1,e1){if(e1=='administrative_area_level_1'){$('#estimatedTaxState').val(e.short_name);}});});});}});}
if(typeof VMX_PAGE_ID!=='undefined'&&VMX_PAGE_ID=='recipe'){var recipeUrl=window.location.href;var pageTitle=$('title').text();var rcpImage=$('#rcp-img').prop('src');var pintrestUrlQueryParam='?url='+encodeURIComponent(recipeUrl)+'&media='+encodeURIComponent(rcpImage)+'&description='+encodeURIComponent(pageTitle);$('#lnkPinterest').attr('href',$('#lnkPinterest').attr('href')+pintrestUrlQueryParam);}
$('.js-support-products').click(function(event){event.preventDefault();var toggleBox=$('.support-products');toggleBox.slideToggle(100).toggleClass('active');var toggleActiveText=$(this).data('toggle-active'),toggleDefaultText=$(this).data('toggle-default');if(toggleBox.hasClass('active')){$(this).text(toggleActiveText);toggleBox.css('display','block');}else{$(this).text(toggleDefaultText);toggleBox.css('display','hidden');}});var searchTypeAhead=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:null,limit:50,remote:'/search/typeahead-json.jsp?Ntt=%QUERY*&Dy=1&Ntk=All'});searchTypeAhead.initialize();if($('.remote .typeahead').typeahead!==undefined){$('.remote .typeahead').typeahead({minLength:3,highlight:true},{name:'typeahead',displayKey:'value',source:searchTypeAhead.ttAdapter()});$('.remote .typeahead').on('typeahead:selected',function(obj,datum,name){updateSearchQueryParam('form.remote',datum.value);});$('.remote .typeahead').on('typeahead:autocompleted',function(obj,datum,name){});$('.remote .typeahead').on('typeahead:cursorchanged',function(obj,datum,name){});}
var searchTypeAheadRCP=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:null,limit:50,remote:'/search/typeahead-json.jsp?Ntt=%QUERY*&Dy=1&Ntk=RecipesAll&searchType=recipes'});searchTypeAheadRCP.initialize();if($('.recipe-remote .typeahead').typeahead!==undefined){$('.recipe-remote .typeahead').typeahead({minLength:3,highlight:true},{name:'typeahead-recipe',displayKey:'value',source:searchTypeAheadRCP.ttAdapter()});$('.recipe-remote .typeahead').on('typeahead:selected',function(obj,datum,name){updateSearchQueryParam('form.recipe-remote',datum.value);});$('.recipe-remote .typeahead').on('typeahead:autocompleted',function(obj,datum,name){});$('.recipe-remote .typeahead').on('typeahead:cursorchanged',function(obj,datum,name){});}
var searchTypeAheadARTBeInspired=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:null,limit:50,remote:'/search/typeahead-json.jsp?Ntt=%QUERY*&Dy=1&Nr=record.seosource:be-inspired-articles&searchType=articles'});searchTypeAheadARTBeInspired.initialize();if($('.be-inspired-article .typeahead').typeahead!==undefined){$('.be-inspired-article .typeahead').typeahead({minLength:3,highlight:true},{name:'typeahead-article',displayKey:'value',source:searchTypeAheadARTBeInspired.ttAdapter()});$('.be-inspired-article .typeahead').on('typeahead:selected',function(obj,datum,name){updateSearchQueryParam('form.article-remote',datum.value);});$('.be-inspired-article .typeahead').on('typeahead:autocompleted',function(obj,datum,name){});$('.be-inspired-article .typeahead').on('typeahead:cursorchanged',function(obj,datum,name){});}
var searchTypeAheadARTCommercial=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:null,limit:50,remote:'/search/typeahead-json.jsp?Ntt=%QUERY*&Dy=1&Nr=record.seosource:commercial-trends-articles&searchType=articles'});searchTypeAheadARTCommercial.initialize();if($('.commercial-article .typeahead').typeahead!==undefined){$('.commercial-article .typeahead').typeahead({minLength:3,highlight:true},{name:'typeahead-article',displayKey:'value',source:searchTypeAheadARTCommercial.ttAdapter()});$('.commercial-article .typeahead').on('typeahead:selected',function(obj,datum,name){updateSearchQueryParam('form.article-remote',datum.value);});$('.commercial-article .typeahead').on('typeahead:autocompleted',function(obj,datum,name){});$('.commercial-article .typeahead').on('typeahead:cursorchanged',function(obj,datum,name){});}
var searchTypeAheadPROD=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace('value'),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:null,limit:50,remote:'/search/typeahead-json.jsp?Ntt=%QUERY*&Dy=1&searchType=products'});searchTypeAheadPROD.initialize();if($('.product-remote .typeahead').typeahead!==undefined){$('.product-remote .typeahead').typeahead({minLength:3,highlight:true},{name:'typeahead-product',displayKey:'value',source:searchTypeAheadPROD.ttAdapter()});$('.product-remote .typeahead').on('typeahead:selected',function(obj,datum,name){updateSearchQueryParam('form.product-remote',datum.value);});$('.product-remote .typeahead').on('typeahead:autocompleted',function(obj,datum,name){});$('.product-remote .typeahead').on('typeahead:cursorchanged',function(obj,datum,name){});}
function updateSearchQueryParam(formId,paramValue){var value=encodeURI(paramValue);var url=window.location.href;var queryStr=null;if(url.indexOf('?')>0){queryStr='?'+url.substring(url.indexOf('?')+1);}
var url=window.location.href;var splitUrl=url.split('/');var endcodedVal=value.replace(/\s+/g,'+');endcodedVal=value.replace(/%20/g,'+');var searchUrl=splitUrl[0]+'//'+splitUrl[2]+$(formId).attr('action')+'/s_'+endcodedVal;if(queryStr!=null){searchUrl=searchUrl+queryParams;}
document.location.href=searchUrl;}
$('.js-searchForm').submit(function(event){event.preventDefault();var form=this;var nttTermInput=$(this).find('.js-ntt-term[name="Ntt"]');if(nttTermInput&&nttTermInput.length>0){var inputVal=$(nttTermInput[0]).val();var formAction=$(form).attr('action');if(inputVal!==''){var formActionWithoutQueryString=formAction;var formActionQueryString='';var indexOfQuery=formAction.indexOf('?');if(indexOfQuery>0){var formActionWithoutQueryString=formAction.substring(0,indexOfQuery);var formActionQueryString=formAction.substring(indexOfQuery);}
if(formActionWithoutQueryString.substring(formActionWithoutQueryString.length-1,formActionWithoutQueryString.length)!=='/'){formActionWithoutQueryString=formActionWithoutQueryString+'/';}
var searchPathPart='s_'+ +inputVal.replace(/\s+/g,'+');formAction=formActionWithoutQueryString+'s_'+inputVal.replace(/\s+/g,'+')+'/'+formActionQueryString;nttTermInput.attr('disabled','disabled');}
window.location=formAction;}});$('#searchSortSelect').change(function(event){event.preventDefault();var s=s_gi('vitamix'+$('#omnitureEnv').val());var selectedOptionElement=$('option:selected',this);if(selectedOptionElement){s.linkTrackVars='eVar39';s.eVar39=selectedOptionElement.data('omni-name');s.tl(true,'o','sort-selected',null,'search');}
if(this.value!='')window.location=this.value;});$('.currPageField').keypress(function(event){if(event.which==13){event.preventDefault();var recsPerPage=$(this).data('recsPerPage');var totalRecs=$(this).data('totalRecs');var noField=$(this).siblings('.pagingationNoField');var nttField=$(this).siblings('.paginationNttField');var nsField=$(this).siblings('.paginationNsField');if(!nttField.val()){nttField.attr('disabled','disabled');}
if(!nsField.val()){nsField.attr('disabled','disabled');}
var currPageFieldVal=$(this).val();if(currPageFieldVal&&$.isNumeric(currPageFieldVal)&&currPageFieldVal>0){var noVal=(currPageFieldVal-1)*recsPerPage;if(noVal<totalRecs){$(this).attr('disabled','disabled');noField.val(noVal);$(this).parents('.paginationForm').submit();}}}});$('#checkoutRegisterForm').submit(function(event){$('#registerEmail').val($('#email').val());});$('#find-retailer-location-form').submit(function(event){getLocations(event);});$('#where-to-buy-submit').click(function(event){getLocations(event);});$('#implicit-opt-in').click(function(event){event.preventDefault();var d=new Date();d.setTime(d.getTime()+(99*24*60*60*1000));var expires='expires='+d.toUTCString();document.cookie='VitamixSecurityCookie=ACCEPTED;path=/;'+expires;$(this).parent().slideUp('slow');});$('#service-center-search').submit(function(event){event.preventDefault();$.get('/customerservice/includes/results.jsp',$('#service-center-search').serialize(),function(response){$('#results-container').html(response);},'html').fail(function(response){});});$('.icn-close.header-mismatch, #hideSwitcher').click(function(event){event.preventDefault();$.post('/international/accept-mismatch.jsp',{},function(response){$(event.target).closest('.js-notification-container').slideUp('slow');},'text');});$('#requestType_0').click(function(event){$('#reqType').val($('#requestType_0').val());$('#fName').val($('#firstName').val());$('#lName').val($('#lastName').val());$('#eml').val($('#email').val());$('#req').click();});$('#requestType_1').click(function(event){$('#reqType').val($('#requestType_1').val());$('#fName').val($('#firstName').val());$('#lName').val($('#lastName').val());$('#eml').val($('#email').val());$('#req').click();});donationFromLoad();$('select#reasonForDonation').on('change',function(){donationFromLoad();});showInputWhenOptionSelected($('#mediaRequestForm_reason'),$('#mediaRequestForm_reasonFreeText'),['Other']);function showInputWhenOptionSelected(selectInput,conditionalInput,targetOptionValues){selectInput.on('change',function(){var targetOptionSelected=$.inArray(selectInput.find('option:selected').val(),targetOptionValues)>-1;conditionalInput.parent()[targetOptionSelected?'show':'hide']();conditionalInput[targetOptionSelected?'removeAttr':'attr']('disabled');});}
function donationFromLoad(){var optionSelected=$('select#reasonForDonation').find('option:selected');var valueSelected=optionSelected.val();var form=$('#donationform');if($('#donationform').length>0){form.find('.field.hidden').hide();form.find('.field label').show();form.find('.form-actions').show();form.find('.field.hidden input, .field.hidden select, .field.hidden textarea').attr('disabled','');if(form.parsley()){form.parsley().destroy();}
var medicalHealth=['medical_health_hardship'];var taxExempt=['tax_exempt'];if(jQuery.inArray(valueSelected,medicalHealth)>-1){form.find('.js-taxExempt').hide();form.find('.js-taxExempt :disabled').attr('disabled','');form.find('.js-medicalHealth').show();form.find('.js-medicalHealth :disabled').prop('disabled',false);}else if(jQuery.inArray(valueSelected,taxExempt)>-1){form.find('.js-medicalHealth').hide();form.find('.js-medicalHealth :disabled').attr('disabled','');form.find('.js-taxExempt').show();form.find('.js-taxExempt :disabled').prop('disabled',false);}
form.parsley($parsleySettings);}}
$('.video-js').click(function(videoIndex){var videoId=$(this).attr('id');videojs(videoId).ready(function(){var url=this.currentSrc(),omniUrl=url.substring(7,url.length-4),omniUrl=omniUrl.match(/\/(.*)/)[1],omniUrl=omniUrl.replace(/\//g,':'),omniUrl=omniUrl.split('?')[0],duration=this.duration();this.on('firstplay',function(){s.Media.open(omniUrl,duration,url);s.Media.play(omniUrl,0);});this.on('pause',function(){s.Media.stop(omniUrl,parseInt(this.currentTime()));});this.on('play',function(){s.Media.play(omniUrl,parseInt(this.currentTime()));});this.on('seeked',function(){s.Media.play(omniUrl,parseInt(this.currentTime()));});this.on('ended',function(){s.Media.stop(omniUrl,parseInt(this.currentTime()));s.Media.close(omniUrl);});});});$(window).on('load',function(){if($('#affSignupForm_affiliateIMNetwork').val()===''){$('#affSignupForm_affiliateIMAddress').attr('disabled','');}});$('#affSignupForm_affiliateIMNetwork').on('change',function(e){if($(e.target).val()===''){$('#affSignupForm_affiliateIMAddress').attr('disabled','');}else{$('#affSignupForm_affiliateIMAddress').prop('disabled',false);}});$('.carousel').slick();var tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);if(!Modernizr.svg){$('img[src*="svg"]').attr('src',function(){return $(this).attr('src').replace('.svg','.png');});}
if(!Modernizr.picture){jQuery.getScript('/assets/js/libs/picturefill.min.js');}});function TermsConditions_ClientValidate(sender,e){e.IsValid=$('.termsConditionsCheckbox').is(':checked');}
function getEVar19(){var days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var now=new Date();var hours,minutes;if(now.getMinutes()<30){minutes='00';}else{minutes='30';}
hours=(now.getHours()>12)?now.getHours()-12:now.getHours();return days[now.getDay()]+'|'+(hours%23)+':'+minutes+((now.getHours())<12?'am':'pm');}
function getCookie(cname){var name=cname+'=';var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)===0)return c.substring(name.length,c.length);}
return'';}
function sendOmnitureCampaignClick(event){var s=s_gi('vitamix'+$('#omnitureEnv').val());s.linkTrackVars='events';s.linkTrackEvents='event19';s.events='event19';s.tl(true,'o','campaign-click-through',null,'search');}
var _talkable_util=function(){var codes={};return{orderItems:[],addCode:function(code){codes[code]=code;},getUniqueCodes:function(){var uniqueCodes=[];for(code in codes){if(codes.hasOwnProperty(code)){uniqueCodes.push(code);}}
return uniqueCodes;}};}();function onYouTubeIframeAPIReady(){$(document).ready(function(){$('.youtubeplayer').each(function(i,e){createYouTubePlayer($(e).attr('id'),$(e).attr('data-video-id'));});});}
function createYouTubePlayer(id,videoId){var player=new YT.Player(id,{videoId:videoId,events:{onReady:youTubePlayerReady,onStateChange:youTubePlayerStateChange}});}
function youTubePlayerReady(event){}
function youTubePlayerStateChange(event,player){if((event.data==3&&event.target.getCurrentTime()==0)||event.data==0){var videoId=$(event.target.getVideoEmbedCode()).attr('src');$.get('https://www.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics&id='+videoId.substring(videoId.lastIndexOf('/')+1,videoId.length)+'&key=AIzaSyB9Fj0Yj9JrUIyq2QWFex_0RH4E_V4HV_8','',function(response){var s=s_gi('vitamix'+$('#omnitureEnv').val());console.log("youtube change");s.linkTrackVars='events,eVar11,prop16';s.eVar11=response.items[0].snippet.title;s.prop16=s.eVar11;if(event.data==3){console.log("first play");s.linkTrackEvents='event13';s.events='event13';}else if(event.data==0){console.log("end play");s.linkTrackEvents='event14';s.events='event14';}
s.tl(true,'o','video-analytics',null,'watch');s.eVar11='';s.prop16='';s.events='';},'json').fail(function(response){console.log('error calling google API');console.log(response);});}}
function bvBeaconEvent(type,label,value){$BV.SI.trackTransactionPageView({'type':type,'label':label,'value':value});}
var divWidth=$('.pod--square').width();$('.pod--square').height(divWidth);$(window).on('resize',function(){var divWidth=$('.pod--square').width();$('.pod--square').height(divWidth);});$("#recommender-select-all").click(function(e){e.preventDefault();$('.btn--multi-selectable').each(function(index){$(this).addClass('btn--selected');var inputId='#'+$(this).attr('id');$(inputId+' input').prop("checked",true);});});$("#recommender-deselect-all").click(function(e){e.preventDefault();$('.btn--multi-selectable').each(function(index){$(this).removeClass('btn--selected');var inputId='#'+$(this).attr('id');$(inputId+' input').prop("checked",false);});});$('.btn--multi-selectable').on('click',function(e){var inputId='#'+$(this).attr('id');if($(this).hasClass('btn--selected')){$(this).removeClass('btn--selected');$(inputId+' input').prop("checked",false);}else{$(this).addClass('btn--selected');$(inputId+' input').prop("checked",true);}});